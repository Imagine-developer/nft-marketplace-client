# Документация для разработчика клиентской части приложения по продаже NFT

## Ссылки
- Описание установки и настройки [README.md](../../README.md)

## Требования к разработчику
- Высокий уровень владения javascript native
- Опыт работы с React.js с использованием хуков
- Опыт или желание работы с Typescript
- Опыт или желание работы с SSR (Next.js)

## История проекта
Проект клиентсого приложения создавался не с нуля, а была интегрирована готовая верстка на HTML/CSS/JS/JQUERY. Исходники версти тут https://github.com/kolenkorov/kolenkorov.github.io/tree/master/nft.
На момент полной натяжки верстки, почти всё осталось без изменений, но многие моменты ввиду особенностей ReactJS пришлось переподключить контролиуемо, в том числе плагин JQuery `slick` был полностью заменен на `react-slick` так как на нем 3 блока динамических элементов и требовалось больше контроля для его управления. А также заменен устаревший плагин `form-styler` на `Select` от `material-ui`.

## Особенности проекта
Несмотря на использование `Next.js` бекенд приложения лежит не в рамках next, а написан отдельно на `fastify`, код бекенда в родительской директории, в связи с чем нужно быть внимательным при установке пакетов.
Приложение находится именно в дочерней директории сервера, чтобы подключать автосгенерированные данные.
Важной особенностью проекта, является то что в нем используются jquery плагины, которые не удалось на данный момент заменить react аналогами, поэтому в коде встречается не react friendly код, но опытного JS разработчика это не должно сильно испугать.
Самой большой проблемой на момент натяжки верстки является трудно поддерживаемый файл стилей [styles/global.css](../styles/globals.css), так как он написан без прекомпиляторов и там 7к+ строк.

## Навигация
Для более быстрого понимания строения файловой системы, ниже приведено дерево [архитектуры](#архитектура). Для глубокого понимания работы кода, в самом коде описаны все методы в аннотациях, и прокомментированы не очевидные моменты.

## Типизация
Внутренние глобальные типы описаны в [../types/index.d.ts](../types/index.d.ts)
TODO Подробнее о типизации внешней (со стороны сервера), будет описано позже, при программировании запросов.

## Линтер
В качестве проверки стиля написания кода используется `eslint`, все необходимые зависимости установлены в `devDependencies`, если ваш VSCode не выявляет ошибки, то смотреть вывод в OUTPUT.Eslint.

### Архитектура
Краткое описание файлового дерева
```d
├── components // папка с реакт компонентами, не являющимися страницами
│   ├── faq // компоненты страницы FAQ
│   │   └── FAQItem.tsx // Элемент вопроса и ответа в спойлере
│   ├── fineart // компоненты страницы FineArt
│   │   ├── FineArtItems.tsx // список слайдера коллекции
│   │   ├── FineArtItem.tsx // один слайд коллекции
│   │   └── Gallery.tsx // слайдер галереи авторов
│   ├── global // компоненты разных страниц
│   │   ├── ArtistItem.tsx // автор с раскрывающимся списком работ
│   │   ├── ArtistsList.tsx // список авторов
│   │   ├── Banner.tsx // баннер
│   │   ├── ConnectWalletModal.tsx // модальное окно подключения кошельков
│   │   ├── Footer.tsx // футер
│   │   ├── Header.tsx // аппбар с меню и строкой поиска
│   │   ├── MarketplaceItems.tsx // эелементы маркетплейса
│   │   ├── MarketplaceItem.tsx // один элемент маркетплейса
│   │   ├── OwnerDropdownItem.tsx // вскрыающийся список истории владения
│   │   ├── ReportModal.tsx // модальное окно сообщения об ошибке
│   │   └── TermsOfServiceModal.tsx // модальное окно принятия условий
│   ├── index // компоненты главной страницы
│   │   ├── FineArtItems.tsx // элементы Fine Art
│   │   ├── FineArtItem.tsx // один Fine Art элемент
│   │   ├── PopularItems.tsx // Элементы popular
│   │   └── PopularItem.tsx // один элемент popular
│   ├── Theme.tsx // Глобальная тема, является оберткой для всех страниц
│   └── UI // папка UI компонентов, которые не содержат логики и компоновки, а только стилизацию
│       └── StyledSelect.tsx // Стилизованный селектор от material-ui
├── docs // документы
│   └── CONTRIBUTING.md // этот документ
├── locales // каталог языковых локалей
│   ├── en // английская
│   │   └── lang.ts
│   ├── index.d.ts // тип языкового объекта
│   └── ru // русская
│       └── lang.ts
├── next.config.js // конфигурация приложения
├── next-env.d.ts // глобальные типы приложения
├── package.json // пакетный файл npm
├── package-lock.json // lock файл npm
├── pages // каталог компонентов страниц
│   ├── about.tsx // страница О нас
│   ├── _app.tsx // глобальный компонент уровня приложения, срабатывает при загрузке каждой страницы, получает и передает языковой объект
│   ├── cabinet.tsx // страница Личный кабинет
│   ├── create-many.tsx // страница Создать несколько копий
│   ├── create-one.tsx // страница создать одну копию
│   ├── create.tsx // страница выбора одного или нескольких для создания
│   ├── _document.tsx // глобальный компонент уровня документа, срабатывает на каждом компоненте, служит для настройки material-ui с SSR
│   ├── faq.tsx // страница Поддержка
│   ├── fineart.tsx // страница Fine Art
│   ├── index.tsx // главная страница
│   ├── marketplace.tsx // страница Маркетплейс
│   ├── product
│   │   └── [productId].tsx // страница одного продукта
│   └── settings.tsx // страница настроек данных пользователя
├── public // публичные файлы, в основном перекочевавшие из верстки
│   ├── favicon.ico // значок
│   ├── fonts // шрифты
│   ├── images // изображения
│   ├── img // ещё изображения, пока не понятно почему отдельно
│   ├── js // javascript от верстки
│   │   ├── jquery-3.5.1.min.js // jquery для работы datepicker и magnificPopup
│   │   ├── jquery-ui.min.js // jquery-ui для работы datepicker
│   │   └── main.js // скрипты от верстки, сейчас не используются, перенесен, часть в pages/_app.tsx, часть в utils/styles.tsx
│   ├── plugins // плагины jquery
│   │   ├── form-styler // ОТКЛЮЧЕН
│   │   │   ├── css
│   │   │   │   ├── jquery.formstyler.css
│   │   │   │   └── jquery.formstyler.theme.css
│   │   │   └── js
│   │   │       ├── jquery.formstyler.js
│   │   │       └── jquery.formstyler.min.js
│   │   ├── magnific-popup // Для трех всплывающих окон 
│   │   │   ├── css
│   │   │   │   └── magnific-popup.min.css
│   │   │   └── js
│   │   │       └── jquery.magnific-popup.min.js
│   │   ├── owl-carousel // ОТКЛЮЧЕН
│   │   │   ├── css
│   │   │   │   ├── owl.carousel.css
│   │   │   │   ├── owl.carousel.min.css
│   │   │   │   ├── owl.theme.default.css
│   │   │   │   └── owl.theme.default.min.css
│   │   │   └── js
│   │   │       └── owl.carousel.min.js
│   │   └── slick // ОТКЛЮЧЕН
│   │       ├── css
│   │       │   ├── slick.css
│   │       │   └── slick-theme.css
│   │       └── js
│   │           └── slick.min.js
│   ├── vercel.svg // иконка
│   └── video // видео
│       └── 1.mp4
├── README.md // инструкция по установке
├── styles // Стили
│   ├── App.module.scss // дополнительные стили для темы
│   └── globals.css // все стили из верстки
├── tsconfig.json // конфиг тайпскрипта
├── types // типы ВРЕМЕННАЯ, пока данные игрушечные здесь, потом типы будут в next.env.d.ts
│   └── index.d.ts
├── utils // папка вспомогательных методов
│   ├── config.ts // Глобальные переменные
│   ├── data.ts // получение времмых данных, пока не подключен сервер
│   ├── Helper.ts // вспомогательные небольшие методы
│   ├── index.ts // экспорт пространства имен utils
│   ├── Request.ts // методы запросов на сервер
│   └── style.ts // стилизованные настройки, в основном из верстки
└── yarn.lock // lock файл yarn-а
```
## Планы
- Везде где данные подтягиваются с сервера исользовать динамичный импорт, чтобы уменьшить fisrt load js
- В качестве временного хранилища, для передачи данных родительским компонентам, использовать `redux`.
- В качестве обработчика асинхронных операций использовать `async await`.
- После написания серверной части, завернуть клиентское приложение в `Docker` контейнер, и аркестровать с сервером, базой данных и другими сервисами через `docker-compose`.